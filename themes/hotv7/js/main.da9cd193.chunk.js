(window.webpackJsonpsyntra=window.webpackJsonpsyntra||[]).push([[0],{44:function(e,t,a){e.exports=a(92)},49:function(e,t,a){},75:function(e,t,a){},82:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),l=(a(49),a(11)),o=a(12),i=a(15),u=a(13),m=a(16),d=a(4),E=a(17),g=a(3),p=a.n(g),b=Object(n.createContext)(),f=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:"/static/media/Media_campus.png",alt:"Logo",style:{width:"10rem",margin:" .75rem 0",display:"inline-block",left:"10%"}}))},h=function(e){var t=Object(n.useContext)(b),a=t.isAuthenticated,c=t.user,s=t.logOut,l=function(e){e.preventDefault(),s()};if(!a)return r.a.createElement("nav",{className:"course-header sticky",id:"course-navbar"},r.a.createElement(d.c,{to:"/",style:{left:"10%"}},r.a.createElement(f,null)));switch(c.roles){case"instelling":return r.a.createElement("nav",{className:"course-header sticky",id:"course-navbar"},r.a.createElement(d.c,{to:"/administratie",style:{left:"10%"}},r.a.createElement(f,null)),r.a.createElement("section",null,r.a.createElement(d.c,{to:"/administratie",className:"btn"}," ",r.a.createElement(p.a,{icon:"verified_user",color:"#white"})," Administratie"),r.a.createElement(d.c,{to:"/groepsbeheer",className:"btn"}," ",r.a.createElement(p.a,{icon:"group",color:"white"})," Groepsbeheer"),r.a.createElement(d.c,{to:"/login",className:"btn"}," ",r.a.createElement(p.a,{icon:"account_circle",color:"white"}),r.a.createElement("span",{className:"username"},c.name))));case"docent":return r.a.createElement("nav",{className:"course-header sticky",id:"course-navbar"},r.a.createElement(d.c,{to:"/",style:{left:"10%"}},r.a.createElement(f,null)),r.a.createElement("section",{className:"navbar-right"},r.a.createElement(d.c,{to:"/groepsbeheer",className:"btn"}," ",r.a.createElement(p.a,{icon:"verified_user",color:"white"})," Groepsbeheer"),r.a.createElement("button",{className:"btn",onClick:l},"Afmelden ")));default:return r.a.createElement("nav",{className:"course-header sticky",id:"course-navbar"},r.a.createElement(d.c,{to:"/",style:{left:"10%"}},r.a.createElement(f,null)),r.a.createElement("section",{className:"navbar-right"},r.a.createElement("button",{className:"btn",onClick:l},"Afmelden ")))}},v=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer container"},r.a.createElement("a",{href:"https://escala.be/",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("img",{className:"footer-logo",src:"/static/media/Esacala.svg",alt:"Escala Logo"})),r.a.createElement("a",{href:"https://syntrawest.be/brochures",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("img",{className:"footer-logo",alt:"SBM Logo",src:"/static/media/sbm_logo.0d91b6af.svg"})),r.a.createElement("a",{href:"https://syntrawest.be/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer-logo",alt:"Syntra Logo",src:"/static/media/SyntraWest.svg"})))}}]),t}(n.Component),_=(a(75),Object(n.createContext)()),N=a(1),O=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}))},y=function(e){var t=Object(n.useState)(0),a=Object(N.a)(t,2),c=a[0],s=a[1],l=e.controller,o=l.total,i=l.limit,u=function(t){console.log(t.target.dataset.index),s(t.target.dataset.index),e.getNewProgress(t.target.dataset.index)};if(i<o){var m=Math.ceil(o/i),d=[],E=i;E=parseInt(c*i)+E>o?o:parseInt(c*i)+E;for(var g=0;g<m;g++){var p="btn";g===parseInt(c)&&(p="btn active"),d.push(r.a.createElement("li",{className:p,key:g,"data-index":g,onClick:u},g+1))}return r.a.createElement("div",{className:"viewedlist-nav"},r.a.createElement("ol",{className:"viewedlist-list"},d),r.a.createElement("span",{className:"small-nav"},"Toont ",parseInt(c*i)+1," t/m ",E," van ",o," "))}return r.a.createElement(O,null)},j=function(e){var t=Object(n.useContext)(_),a=Object(n.useContext)(b),c=t.getProgress,s=t.progress,l=t.total,o=t.offset,i=t.error,u=a.user,m=a.isAuthenticated;Object(n.useEffect)(function(){c(u.id,10,0)},[m]);var E={total:l,limit:10,offset:o};return console.log(s),s?Array.isArray(s)?r.a.createElement(n.Fragment,null,r.a.createElement("ol",null,s.map(function(e){var t=e.perc_viewed,a=e.course_id,n=e.video_id,c=e.videoTitle,s={color:"white",width:t+"%"};return r.a.createElement("li",{key:n,className:"dashboard__link"},r.a.createElement(d.b,{to:"/video/".concat(a,"/").concat(n)},r.a.createElement("span",null),r.a.createElement("span",{className:"dashboard__link-title"},c),r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:"bar",style:s}),">")))})),l>10?r.a.createElement(y,{controller:E,getNewProgress:function(e){console.log(e),c(u.id,10,e)}}):null):r.a.createElement("section",{className:"card"},r.a.createElement("h3",null,s)):null!==i?r.a.createElement("h2",null,"Er is iets misgegaan"):r.a.createElement(O,null)},S=Object(n.createContext)(),k=a(29),I=a.n(k);var w=function(e){var t=e.course;return void 0===t.acf?r.a.createElement(O,null):r.a.createElement("figure",null,r.a.createElement(I.a,{height:300,throttle:200},r.a.createElement("img",{src:t.acf.pictogram,alt:t.name,className:"course__image"})))},x=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.course;return e?r.a.createElement(d.b,{to:"video/"+e.id+"/"+e.acf["video-link"],className:"dashboard__course-link",title:"Ga naar ".concat(e.name)},r.a.createElement("article",{className:"dashboard__grid-item",id:e.id},r.a.createElement("header",{className:"thumb-header"},r.a.createElement("h5",null,e.name)," "),r.a.createElement(w,{course:e}))):r.a.createElement("span",null,"Laden...")}}]),t}(n.Component),A=function(){var e=Object(n.useContext)(b),t=Object(n.useContext)(S),a=e.subscriptions,c=t.courses,s=t.getCourses,l=Object(n.useState)([]),o=Object(N.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)(function(){var e=parseInt(a.cursussen);if(c){for(var t=[],n=function(e){var n=parseInt(a["cursussen_"+e+"_cursus_id"]),r=c.find(function(e){return e.id===n});t.push(r)},r=0;r<e;r++)n(r);u(t)}else s()},[c,a]),r.a.createElement(n.Fragment,null,i.map(function(e,t){return r.a.createElement(x,{course:e,key:t})}))},D=Object(n.createContext)(),C=function(e){var t=Object(n.useContext)(S),a=t.courses,c=t.getCourses,s=e.group,l=s.group,o=l.name,i=l.group_id,u=l.description,m="";u&&(m=r.a.createElement("section",{className:"group__description"},r.a.createElement("p",null,u))),Object(n.useEffect)(function(){a||c()},[a]);var d=function(e){var t=[];return console.log(a),e?((e=e.split(",")).forEach(function(e){a&&a.find(function(a){return parseInt(a.id)===parseInt(e)&&t.push(a),null})}),t):null}(s.courses);u&&(m=r.a.createElement("section",{className:"group__description"},r.a.createElement("p",null,u,r.a.createElement("br",null),"Aantal studenten: ",s.total_users)));var E=[];return d.length>0&&d.map(function(e,t){return E.push(r.a.createElement(x,{course:e,key:t})),!0}),r.a.createElement("article",{className:"group__item",id:"group_"+i},r.a.createElement("header",{className:"dashboard-item-header"},r.a.createElement("h3",null,o," ")),r.a.createElement("article",null,r.a.createElement("aside",null,m),r.a.createElement("section",{className:"course__grid"},E)))},L=function(){var e=Object(n.useContext)(D),t=Object(n.useContext)(b),a=e.groupError,c=e.groups,s=e.getGroups,l=t.user;Object(n.useEffect)(function(){null===c&&s()},[c]);return a?r.a.createElement("h2",null,"Er is iets misgegaan..."):r.a.createElement("div",null,function(e){if(e){var t=[];return e.map(function(e,a){return e.users.find(function(e){return e.id===l.id})?(t.push(r.a.createElement(C,{group:e,key:a})),!0):null}),t}return null}(c))},R=function(e){var t=Object(n.useContext)(b).user;if(t){var a=t.id,c=t.first_name,s=t.last_name;return"instelling"===t.roles?r.a.createElement(E.a,{to:"/administratie"}):(document.title="Dashboard van ".concat(c," ").concat(s),r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"dashboard"},r.a.createElement("header",{className:"card-header",id:"user_".concat(a)},r.a.createElement("h2",null,"Dashboard van ",c," ",s," ")),r.a.createElement("section",{className:"dashboard__content"},r.a.createElement("article",{className:"dashboard__content-panel"},r.a.createElement("header",{className:"course__header"},r.a.createElement("h4",null,"Recent bekeken:")),r.a.createElement("section",{className:"course__list_view"},r.a.createElement(j,null))),r.a.createElement("article",{className:"dashboard__content-panel"},r.a.createElement("header",{className:"course__header"},r.a.createElement("h4",null,"Uw cursussen:")),"student"===t.roles?r.a.createElement("section",{className:"course__grid"},r.a.createElement(A,null)):r.a.createElement("section",{className:"groups__grid"},r.a.createElement(L,null)))))))}return r.a.createElement("main",{className:"container"},r.a.createElement(O,null))},G=document.getElementById("root"),T=G.dataset.checkout,F=G.dataset.connection,J=F+"/wp-json/simple-jwt-authentication/v1/token",P=function(e){var t=Object(n.useContext)(b),a=t.user,c=t.isAuthenticated,s=t.isLoggedIn,l=t.checkRegistration,o=t.error;Object(n.useEffect)(function(){s()},[]);if(c)return a.roles&&"instelling"===a.roles[0]?r.a.createElement(E.a,{to:"/administratie"}):r.a.createElement(R,null);var i="";return o&&(i=r.a.createElement("div",{className:"message error"},o.status)),r.a.createElement("div",{className:"login__window"},r.a.createElement("section",{className:"form"},r.a.createElement("header",{className:"card-header"},r.a.createElement("h2",null,"Voer registratie code in")),r.a.createElement("article",{className:"sub-header"},r.a.createElement("p",null,"Om toegang te krijgen tot deze site is een registratie code vereist.")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target);l(t)}},r.a.createElement("section",{className:"form__item"},r.a.createElement("label",{htmlFor:"code"},"Registratiecode"),r.a.createElement("input",{id:"code",name:"code",required:!0,type:"text"})),r.a.createElement("p",null,"Deze Code heeft u verkregen van House of training, en is persoonlijk."),i,r.a.createElement("section",{className:"form__item"},r.a.createElement("button",{className:"btn"},"Inloggen"),r.a.createElement("input",{type:"hidden",name:"action",value:"checkRegistration"}),r.a.createElement("input",{type:"hidden",name:"nonce",value:T}))),r.a.createElement(d.b,{to:"/login",className:"btn btn-login"},"Login voor Instelling")))},B=a(2),W=a.n(B),U=a(5),M=a(14);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(M.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var H=function(e,t){var a,n,r;switch(t.type){case"USER_LOADED":return a=t.payload.registration.userobject,n=t.payload.registration.session,r=t.payload.registration.subscriptionmeta,localStorage.setItem("userData",JSON.stringify(a)),localStorage.setItem("session",JSON.stringify(n)),localStorage.setItem("subscriptions",JSON.stringify(r)),q({},e,{isAuthenticated:!0,loading:!1,user:a,subscriptions:r,currentSubscription:void 0,error:null});case"ADMIN_LOADED":return a=t.payload,Array.isArray(a.roles)&&(a.roles=a.roles[0]),localStorage.setItem("userData",JSON.stringify(a)),q({},e,{isAuthenticated:!0,user:a,subscriptions:null,currentSubscription:null,loading:!1,error:null});case"LOGIN_SUCCESS":return a=t.payload.registration.userobject,n=t.payload.registration.session,r=t.payload.registration.subscriptionmeta,localStorage.setItem("userData",JSON.stringify(a)),localStorage.setItem("session",JSON.stringify(n)),localStorage.setItem("subscriptions",JSON.stringify(r)),q({},e,{isAuthenticated:!0,user:a,subscriptions:r,loading:!1,error:null});case"LOGOUT":return localStorage.removeItem("userData"),localStorage.removeItem("session"),localStorage.removeItem("subscriptions"),q({},e,{isAuthenticated:!1,loading:!1,user:null,error:null,subscriptions:null,currentSubscription:null});case"NOT_LOGGED_IN":return q({},e,{isAuthenticated:!1,loading:!1,error:null,user:null,subscriptions:null});case"WAS_LOGGED_IN":var c=JSON.parse(localStorage.getItem("userData")),s=[];return null!==localStorage.getItem("subscriptions")&&(s=JSON.parse(localStorage.getItem("subscriptions"))),q({},e,{isAuthenticated:!0,loading:!1,error:null,user:c,subscriptions:s});case"LOGIN_FAIL":case"LOGIN_ERROR":case"AUTH_ERROR":case"REGISTER_FAIL":return localStorage.removeItem("session"),localStorage.removeItem("userData"),localStorage.removeItem("subscriptions"),q({},e,{isAuthenticated:!1,loading:!1,error:t.payload,user:null,subscriptions:null});case"CLEAR_ERRORS":return q({},e,{error:null});default:return e}},K=function(e){var t={session:JSON.parse(localStorage.getItem("session")),isAuthenticated:null,loading:!1,error:null,user:null,subscriptions:null,currentSubscription:null},a=Object(n.useReducer)(H,t),c=Object(N.a)(a,2),s=c[0],l=c[1],o=function(){var e=Object(U.a)(W.a.mark(function e(t){var a,n,r;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(F,"/wp-admin/admin-ajax.php"),e.prev=1,e.next=4,fetch(a,{method:"POST",body:t});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,console.log(r.success),r.success?l({type:"USER_LOADED",payload:r.data}):l({type:"REGISTER_FAIL",payload:r.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),l({type:"REGISTER_FAIL",payload:e.t0});case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}(),i=function(e){return!e.data||(!e.data.status||403!==e.data.status&&404!==e.data.status)},u=function(){var e=Object(U.a)(W.a.mark(function e(t){var a,n,r,c,s,o,u,m,d,E;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(localStorage&&localStorage.getItem("userData")&&localStorage.getItem("session"))){e.next=19;break}return a=JSON.parse(localStorage.getItem("userData")),n=JSON.parse(localStorage.getItem("session")),r=F+"/wp-json/wp/v2/users/"+a.user_id,e.prev=4,e.next=7,fetch(r,{headers:{"Content-Type":"application/json; charset=utf-8",authorization:"Bearer "+n.token}});case 7:return c=e.sent,e.next=10,c.json();case 10:s=e.sent,l({type:"ADMIN_LOADED",payload:s}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:e.next=47;break;case 19:return e.next=21,fetch(J,{method:"POST",body:t});case 21:return o=e.sent,e.next=24,o.json();case 24:if(u=e.sent,!i(u)){e.next=45;break}return console.log("Token \xeds Checked, continue..."),e.prev=27,m=F+"/wp-json/wp/v2/users/"+u.user_id,e.next=31,fetch(m,{headers:{"Content-Type":"application/json; charset=utf-8",authorization:"Bearer "+u.token}});case 31:return d=e.sent,e.next=34,d.json();case 34:E=e.sent,i(E)?(l({type:"ADMIN_LOADED",payload:E}),localStorage.setItem("session",JSON.stringify(u))):(console.log(E),localStorage.clear(),l({type:"REGISTER_FAIL",payload:E})),e.next=43;break;case 38:e.prev=38,e.t1=e.catch(27),console.log(e.t1),localStorage.clear(),l({type:"REGISTER_FAIL",payload:e.t1});case 43:e.next=47;break;case 45:localStorage.clear(),l({type:"REGISTER_FAIL",payload:u});case 47:case"end":return e.stop()}},e,null,[[4,14],[27,38]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{session:s.session,isAuthenticated:s.isAuthenticated,loading:s.loading,subscriptions:s.subscriptions,user:s.user,error:s.error,checkRegistration:o,isLoggedIn:function(){localStorage&&localStorage.getItem("userData")&&localStorage.getItem("session")?l({type:"WAS_LOGGED_IN"}):l({type:"NOT_LOGGED_IN"})},logOut:function(){l({type:"LOGOUT"})},loadAdmin:u}},e.children)},V=(a(82),a(18),a(42)),Q=(n.Component,a(86),function(e){var t=Object(n.useContext)(b),a=t.user,c=t.logOut;return r.a.createElement("section",{className:"form"},r.a.createElement("header",{className:"card-header"},r.a.createElement("h2",null,"Welkom terug, ",a.name)),r.a.createElement("article",{className:"loggedin-content"},r.a.createElement("h5",null,"Je bent nu ingelogd"),r.a.createElement("p",null,"Ga verder naar onze ",r.a.createElement(d.b,{to:"/"},r.a.createElement("button",{className:"btn"},"Start pagina"))),r.a.createElement("h5",null,"Wil je uitloggen?"),r.a.createElement("p",null,"Klik hieronder om uit te loggen"),r.a.createElement("button",{className:"btn",onClick:function(e){c(),e.currentTarget.value="Cache geleegd, ververs nu de pagina"}},"Log Out")))}),X=(a(87),function(e){var t=Object(n.useContext)(b),a=t.loadAdmin,c=t.userError,s=t.error,l="";if(c)switch(console.log(c),c.code){case"[jwt_auth] invalid_username":l="Gebruikersnaam onbekend";break;case"[jwt_auth] incorrect_password":l="Wachtwoord incorrect";break;default:l=c.code}if(s)switch(console.log(s),s.code){case"rest_user_invalid_id":l="Gebruikersnaam staat niet geregistreerd";break;case"[jwt_auth] invalid_username":l="Gebruikersnaam onbekend";break;case"[jwt_auth] incorrect_password":l="Wachtwoord incorrect";break;default:l=s.message}return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"form"},r.a.createElement("header",{className:"course__header"},r.a.createElement("h2",null,"Reeds geregistreerd?")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target);a(t)}},c?r.a.createElement("div",{className:"error"},l):"",s?r.a.createElement("div",{className:"error"},l):"",r.a.createElement("section",{className:"form__item"},r.a.createElement("label",{htmlFor:"username"},"Gebruikersnaam"),r.a.createElement("input",{id:"username",name:"username",required:!0,type:"text"})),r.a.createElement("section",{className:"form__item"},r.a.createElement("label",{htmlFor:"password"},"Wachtwoord"),r.a.createElement("input",{id:"password",name:"password",required:!0,type:"password"})),r.a.createElement("section",{className:"form__item"},r.a.createElement("button",{className:"btn"},"Inloggen")))),r.a.createElement("section",{className:"form"},r.a.createElement("header",{className:"course__header"},r.a.createElement("h2",null,"RegistratieCode:")),r.a.createElement("section",{className:"form__item"},r.a.createElement("p",null,"Log in met registratie code"),r.a.createElement("span",{className:"btn"},r.a.createElement(d.b,{to:"/"},"Ga naar de registratie pagina")))))}),Y=function(e){var t=Object(n.useContext)(b).isAuthenticated;return document.title="Login - ".concat("House of Training"),r.a.createElement("div",{className:"login__window"},t?r.a.createElement(Q,null):r.a.createElement(X,null))};a(88),a(89),a(90),a(91);var Z=document.getElementById("root").dataset.domain,$=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(K,null,r.a.createElement(d.a,{basename:"/"+Z},r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement("main",{className:"main-window"},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:P}),r.a.createElement(E.b,{path:"/login",component:Y}))),r.a.createElement(v,null))))}}]),t}(n.Component);if(document.getElementById("root")){console.log("Start");var ee=document.getElementById("root"),te=ee.dataset.checkout,ae=ee.dataset.port;s.a.render(r.a.createElement($,{checkout:te,portal:ae}),document.getElementById("root"))}}},[[44,1,2]]]);
//# sourceMappingURL=main.da9cd193.chunk.js.map